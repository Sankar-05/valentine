<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Surprise ‚ú®</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Quicksand', sans-serif; background-color: #fff0f3; overflow-x: hidden; }
        .font-handwritten { font-family: 'Caveat', cursive; }
        .hidden-content { display: none; }
        
        .parchment {
            background-color: #f4ecd8;
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2) 0%, rgba(0,0,0,0) 100%),
                url("https://www.transparenttextures.com/patterns/papyros.png");
            border: 1px solid #dcd0b9;
            box-shadow: inset 0 0 100px rgba(184, 168, 131, 0.3), 0 20px 50px rgba(0,0,0,0.1);
        }

        @keyframes crawl {
            0% { transform: translateX(-150%) rotate(-10deg); }
            25% { transform: translateX(-100%) rotate(10deg); }
            50% { transform: translateX(-50%) rotate(-10deg); }
            75% { transform: translateX(-25%) rotate(10deg); }
            100% { transform: translateX(0%) rotate(0deg); }
        }
        .animate-crawl { animation: crawl 3.5s ease-out forwards; }

        .floating { animation: float 3s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .heart { position: absolute; color: #ff85a1; opacity: 0.6; animation: rise 5s linear infinite; z-index: 1; }
        @keyframes rise {
            from { transform: translateY(100vh) scale(0); opacity: 1; }
            to { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        .custom-scroll::-webkit-scrollbar { width: 8px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #dcd0b9; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

    <div id="youtube-container" style="display:none;">
        <div id="player"></div>
    </div>

    <div id="gate" class="z-30 bg-white/80 backdrop-blur-md p-10 rounded-[2.5rem] shadow-2xl text-center border-4 border-pink-100 max-w-sm mx-4">
        <div class="text-5xl mb-4 floating">‚ú®</div>
        <h2 class="text-2xl font-bold text-pink-500 mb-6">Knock knock! <br>Enter the secret word:</h2>
        <input type="text" id="pass-input" placeholder="Hint: Where we first met" 
            class="w-full p-3 rounded-full border-2 border-pink-200 outline-none text-center text-pink-600 focus:border-pink-400 mb-6">
        <button onclick="checkPass()" class="bg-pink-400 hover:bg-pink-500 text-white font-bold py-3 px-8 rounded-full transition-all shadow-md">
            Open üå∏
        </button>
        <p id="error-msg" class="text-pink-400 mt-4 text-sm hidden font-bold">That's incorrect, try again niggesh üòà.</p>
    </div>

    <div id="main-content" class="hidden-content flex-col items-center p-6 text-center z-10">
        <div class="bg-white/90 p-8 md:p-12 rounded-[3rem] shadow-2xl max-w-xl border-t-8 border-pink-300">
            <h1 class="text-5xl md:text-6xl font-handwritten text-pink-500 mb-6 text-center">Hi Lalluuu! ‚ù§Ô∏è</h1>
            <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                I wanted to make something special just for you. Every day with you feels like a dream and I'm so lucky to have you in my life.
            </p>
            <h2 class="text-3xl font-bold text-pink-400 mb-8 text-center">Will you be my Valentine?</h2>
            
            <div class="flex gap-6 justify-center relative h-16">
                <button onclick="showPanda()" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-10 rounded-full shadow-lg transform active:scale-95 transition-all">
                    Yes! ‚ú®
                </button>
                <button id="no-btn" onmouseover="moveButton()" class="bg-pink-100 text-pink-300 font-bold py-3 px-10 rounded-full transition-all duration-75">
                    No
                </button>
            </div>
        </div>
    </div>

    <div id="panda-delivery" class="hidden-content flex-col items-center justify-center p-6 text-center z-20 w-full min-h-screen bg-pink-50/50 backdrop-blur-sm">
        <div class="panda-container relative">
            <div id="moving-panda" class="text-[140px] relative inline-block">
                üêº
                <span class="absolute top-2 right-4 text-5xl rotate-12">üìú</span>
            </div>
            
            <div id="panda-bubble" class="opacity-0 transition-opacity duration-700 absolute -top-20 -right-24 bg-white p-4 rounded-2xl shadow-lg border-2 border-pink-100 max-w-[220px]">
                <p class="text-sm font-bold text-gray-700 italic">"Phew! I've got a scroll for you, Lalitha! Ready to read it?"</p>
                <div class="absolute -bottom-2 left-4 w-4 h-4 bg-white border-b-2 border-r-2 border-pink-100 rotate-45"></div>
            </div>
        </div>

        <button id="read-btn" onclick="acceptScroll()" class="opacity-0 transition-opacity duration-700 mt-12 bg-pink-500 hover:bg-pink-600 text-white font-bold py-4 px-12 rounded-full shadow-xl transform hover:scale-105 transition-all text-xl">
            Read Scroll üéÄ
        </button>
    </div>

    <div id="final-screen" class="hidden-content flex-col items-center p-4 z-10 w-full max-w-2xl mx-auto">
        <div id="letter-container" class="parchment p-10 md:p-16 rounded-xl overflow-y-auto max-h-[90vh] custom-scroll scroll-smooth relative">
            <h1 class="text-5xl md:text-6xl font-handwritten text-amber-900 mb-10 text-center border-b border-amber-200 pb-6">
                Yayyyy!!! ‚ù§Ô∏èüï∫‚ú®
            </h1>
            
            <div id="typewriter" class="text-left space-y-10 text-amber-950 leading-relaxed text-2xl md:text-3xl font-handwritten"></div>

            <div id="sappy-note" class="hidden text-xl italic opacity-80 pt-6 mt-10 border-t border-amber-200 font-sans text-amber-900">
                And yeah, I know you're not into sappy shit like this so I'll wrap things up. Thank you for being so patient with me and just being you. I'm really proud of what we have and what the future has in store for us &lt;3
            </div>

            <div id="final-emojis" class="hidden mt-12 text-5xl flex gap-6 justify-center pb-10">‚òÅÔ∏è üß∏ üç∞</div>
        </div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // --- üéµ PASTE YOUR YOUTUBE LINK HERE üéµ ---
        const youtubeLink = "https://youtu.be/450p7goxZqg?list=RD450p7goxZqg"; 
        // ------------------------------------------

        let player;
        const message = `You just made me the happiest guy ever. I can't wait to celebrate with you!\n\nThese past 8 months with you have meant more to me than I can ever put into words. We've shared a lot of moments, both highs as well as lows. But instead of breaking us, they've only strengthened what we had.\n\nEvery obstacle we've faced has only reminded me how much I value the idea of us and how grateful I am to grow together with you.\n\nYou are such a warm person and you make me so happy. The way you get shy, that stupid smile of yours, and the way you make even the most mundane of days seem exciting are all reasons why I fell for you.\n\nBut every time we are together, you'd do some little thing or the other and I can feel myself falling for you all over again. I really like you, Lalitha, and I wouldn't trade what we have for anything else.\n\nThank you for choosing me.`;

        // Function to extract ID from various YouTube link formats
        function getYouTubeId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        // Initialize YouTube Player
        function onYouTubeIframeAPIReady() {
            const videoId = getYouTubeId(youtubeLink);
            if (videoId) {
                player = new YT.Player('player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': videoId },
                    events: { 'onReady': onPlayerReady }
                });
            }
        }

        function onPlayerReady(event) {
            console.log("Music engine ready.");
        }

        function checkPass() {
            const input = document.getElementById('pass-input').value.toLowerCase();
            if (input === 'fpga lab' || input === 'fpga') { 
                document.getElementById('gate').style.display = 'none';
                document.getElementById('main-content').classList.remove('hidden-content');
                document.getElementById('main-content').classList.add('flex');
                createHearts();
            } else {
                document.getElementById('error-msg').classList.remove('hidden');
                document.getElementById('pass-input').value = '';
            }
        }

        function moveButton() {
            const btn = document.getElementById('no-btn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * (window.innerWidth - 150) + 'px';
            btn.style.top = Math.random() * (window.innerHeight - 100) + 'px';
        }

        function showPanda() {
            document.getElementById('main-content').style.display = 'none';
            const pandaSection = document.getElementById('panda-delivery');
            pandaSection.classList.remove('hidden-content');
            pandaSection.classList.add('flex');
            document.getElementById('moving-panda').classList.add('animate-crawl');

            setTimeout(() => {
                document.getElementById('panda-bubble').style.opacity = '1';
                document.getElementById('read-btn').style.opacity = '1';
            }, 3800);
        }

        function acceptScroll() {
            // Start the music!
            if (player && player.playVideo) {
                player.playVideo();
            }

            document.getElementById('panda-delivery').style.display = 'none';
            const final = document.getElementById('final-screen');
            final.classList.remove('hidden-content');
            final.classList.add('flex');
            
            setTimeout(() => {
                typeWriter(message, 0, function() {
                    document.getElementById('sappy-note').classList.remove('hidden');
                    document.getElementById('final-emojis').classList.remove('hidden');
                    const container = document.getElementById("letter-container");
                    container.scrollTop = container.scrollHeight;
                });
            }, 500);
        }

        function typeWriter(text, i, fnCallback) {
            const container = document.getElementById("letter-container");
            const display = document.getElementById("typewriter");
            if (i < text.length) {
                let char = text.charAt(i);
                display.innerHTML += (char === '\n') ? '<br>' : char;
                container.scrollTop = container.scrollHeight;
                setTimeout(() => typeWriter(text, i + 1, fnCallback), 45);
            } else if (typeof fnCallback == 'function') {
                fnCallback();
            }
        }

        function createSingleHeart() {
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.className = 'heart';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        function createHearts() {
            setInterval(createSingleHeart, 400);
        }

        document.getElementById('pass-input').addEventListener('keypress', (e) => { if (e.key === 'Enter') checkPass(); });
    </script>
</body>
</html>
